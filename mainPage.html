<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ì–ª–∞–≤–Ω–∞—è ¬∑ 320xbet</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="dashboard-shell">
    <header class="glass-card top-bar">
      <div>
        <p class="eyebrow">–¢–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å</p>
        <h1>–ü—Ä–∏–≤–µ—Ç, <span id="username"></span> üëã</h1>
        <p class="muted">–ì–æ—Ç–æ–≤ —Å—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞—É–Ω–¥? –ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p>
      </div>
      <div class="link-row">
        <a href="profile.html" class="btn btn-secondary" style="width: auto; min-width: 120px;">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a>
        <button id="logoutBtn" class="btn-outline" style="width: auto; min-width: 120px;">–í—ã–π—Ç–∏</button>
      </div>
    </header>

    <section class="stat-grid">
      <article class="glass-card stat-card">
        <p class="muted">–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</p>
        <h2><span id="balance"></span> üç¨</h2>
        <p class="stat-subtext">–ö–æ–Ω—Ñ–µ—Ç–∫–∏ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∏ —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
      </article>
      <article class="glass-card stat-card">
        <p class="muted">–ú–∏–Ω–∏-—Ä–µ–∂–∏–º—ã</p>
        <h2>4 –∞–∫—Ç–∏–≤–Ω—ã—Ö</h2>
        <p class="stat-subtext">üöÄ –ö—Ä–∞—à, üéØ –†—É–ª–µ—Ç–∫–∞, ü™ô –ú–æ–Ω–µ—Ç–∫–∞, üé≤ –î–∞–π—Å</p>
      </article>
    </section>

    <section class="game-grid">
      <article class="glass-card game-card">
        <span class="tag">üöÄ –ö—Ä–∞—à</span>
        <h3>–ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫—Ä–∞—à</h3>
        <p class="muted">–£—Å–ø–µ–π –∑–∞–±—Ä–∞—Ç—å –∫–æ–Ω—Ñ–µ—Ç—ã –¥–æ –≤–∑—Ä—ã–≤–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞. –û–±—â–∏–π —Ä–∞—É–Ω–¥ –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤.</p>
        <button class="btn-primary" onclick="window.location.href='crash.html'">–ó–∞–ø—É—Å—Ç–∏—Ç—å ¬´–ö—Ä–∞—à¬ª</button>
      </article>

      <article class="glass-card game-card">
        <span class="tag">üéØ –†—É–ª–µ—Ç–∫–∞</span>
        <h3>–ù–µ–æ–Ω-–∫–æ–ª–µ—Å–æ</h3>
        <p class="muted">–°—Ç–∞–Ω—å –æ–¥–Ω–∏–º –∏–∑ –¥–≤—É—Ö –∏–ª–∏ –±–æ–ª–µ–µ –∏–≥—Ä–æ–∫–æ–≤, –¥–µ–ª–∏ –±–∞–Ω–∫ –ø–æ —Å—Ç–∞–≤–∫–∞–º –∏ –ø–æ–π–º–∞–π —Å–µ–∫—Ç–æ—Ä —É–¥–∞—á–∏.</p>
        <button class="btn-secondary" onclick="window.location.href='roulette.html'">–ó–∞–ø—É—Å—Ç–∏—Ç—å ¬´–†—É–ª–µ—Ç–∫—É¬ª</button>
      </article>

      <article class="glass-card game-card">
        <span class="tag">ü™ô –ú–æ–Ω–µ—Ç–∫–∞</span>
        <h3>50/50 Coinflip</h3>
        <p class="muted">–í—ã–±–µ—Ä–∏ —Å—Ç–æ—Ä–æ–Ω—É –º–æ–Ω–µ—Ç—ã, –∑–∞–¥–∞–π —Å—Ç–∞–≤–∫—É –∏ –ø—Ä–æ–≤–µ—Ä—å —É–¥–∞—á—É –≤ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–º —Ä–∞—É–Ω–¥–µ.</p>
        <button class="btn-secondary" onclick="window.location.href='coinflip.html'">–ò–≥—Ä–∞—Ç—å –≤ ¬´–ú–æ–Ω–µ—Ç–∫—É¬ª</button>
      </article>

      <article class="glass-card game-card">
        <span class="tag">üé≤ –î–∞–π—Å</span>
        <h3>Neon Dice</h3>
        <p class="muted">–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 6, –±—Ä–æ—Å—å –∫–∏–±–µ—Ä-–∫—É–±–∏–∫ –∏ —Å–æ—Ä–≤–∏ –¥–æ √ó6 –æ—Ç —Å—Ç–∞–≤–∫–∏.</p>
        <button class="btn-secondary" onclick="window.location.href='dice.html'">–ò–≥—Ä–∞—Ç—å –≤ ¬´–î–∞–π—Å¬ª</button>
      </article>
    </section>
  </div>

  <script>
    const BASE_URL = 'https://fen4yaragithubio-production.up.railway.app';

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    async function checkAuth() {
      try {
        const response = await fetch(`${BASE_URL}/check-auth`, {
          credentials: 'include'
        });

        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.error || '–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è');
        }

        const user = await response.json();
        document.getElementById('username').textContent = user.username;
        document.getElementById('balance').textContent = user.balance;
      } catch (err) {
        console.error('Auth error:', err);
        alert('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: ' + err.message);
        window.location.href = 'index.html';
      }
    }

    document.getElementById('logoutBtn').addEventListener('click', async () => {
      try {
        const response = await fetch(`${BASE_URL}/logout`, {
          method: 'POST',
          credentials: 'include'
        });
        
        if (response.ok) {
          window.location.href = 'index.html';
        } else {
          throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–π—Ç–∏');
        }
      } catch (err) {
        console.error('Logout error:', err);
        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ: ' + err.message);
      }
    });

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    checkAuth();
  </script>
</body>
</html>
