<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ì–ª–∞–≤–Ω–∞—è ¬∑ 320xbet</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="dashboard-shell">
    <header class="glass-card top-bar">
      <div>
        <p class="eyebrow">–¢–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å</p>
        <h1>–ü—Ä–∏–≤–µ—Ç, <span id="username"></span> üëã</h1>
        <p class="muted">–ì–æ—Ç–æ–≤ —Å—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞—É–Ω–¥? –ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p>
      </div>
      <button id="logoutBtn" class="btn-outline">–í—ã–π—Ç–∏</button>
    </header>

    <section class="stat-grid">
      <article class="glass-card stat-card">
        <p class="muted">–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</p>
        <h2><span id="balance"></span> üç¨</h2>
        <p class="stat-subtext">–ö–æ–Ω—Ñ–µ—Ç–∫–∏ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∏ —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
      </article>
      <article class="glass-card stat-card">
        <p class="muted">–ú–∏–Ω–∏-—Ä–µ–∂–∏–º—ã</p>
        <h2>2 –∞–∫—Ç–∏–≤–Ω—ã—Ö</h2>
        <p class="stat-subtext">üöÄ –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫—Ä–∞—à –∏ üéØ —Ü–∏—Ñ—Ä–æ–≤–∞—è —Ä—É–ª–µ—Ç–∫–∞</p>
      </article>
    </section>

    <section class="game-grid">
      <article class="glass-card game-card">
        <span class="tag">üöÄ –ö—Ä–∞—à</span>
        <h3>–ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫—Ä–∞—à</h3>
        <p class="muted">–£—Å–ø–µ–π –∑–∞–±—Ä–∞—Ç—å –∫–æ–Ω—Ñ–µ—Ç—ã –¥–æ –≤–∑—Ä—ã–≤–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞. –û–±—â–∏–π —Ä–∞—É–Ω–¥ –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤.</p>
        <button class="btn-primary" onclick="window.location.href='crash.html'">–ó–∞–ø—É—Å—Ç–∏—Ç—å ¬´–ö—Ä–∞—à¬ª</button>
      </article>

      <article class="glass-card game-card">
        <span class="tag">üéØ –†—É–ª–µ—Ç–∫–∞</span>
        <h3>–ù–µ–æ–Ω-–∫–æ–ª–µ—Å–æ</h3>
        <p class="muted">–°—Ç–∞–Ω—å –æ–¥–Ω–∏–º –∏–∑ –¥–≤—É—Ö –∏–ª–∏ –±–æ–ª–µ–µ –∏–≥—Ä–æ–∫–æ–≤, –¥–µ–ª–∏ –±–∞–Ω–∫ –ø–æ —Å—Ç–∞–≤–∫–∞–º –∏ –ø–æ–π–º–∞–π —Å–µ–∫—Ç–æ—Ä —É–¥–∞—á–∏.</p>
        <button class="btn-secondary" onclick="window.location.href='roulette.html'">–ó–∞–ø—É—Å—Ç–∏—Ç—å ¬´–†—É–ª–µ—Ç–∫—É¬ª</button>
      </article>
    </section>

    <section class="glass-card">
      <p class="eyebrow">–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?</p>
      <p class="muted">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –∏–∑–º–µ–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø. –ï—Å–ª–∏ —Ç—ã –º–æ–¥–µ—Ä–∞—Ç–æ—Ä ‚Äî –ø–µ—Ä–µ—Ö–æ–¥–∏ –≤ <a href="admin.html">–ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</a>.</p>
    </section>
  </div>

  <script>
    const BASE_URL = 'https://fen4yaragithubio-production-9286.up.railway.app';

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    async function checkAuth() {
      try {
        const response = await fetch(`${BASE_URL}/check-auth`, {
          credentials: 'include'
        });

        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.error || '–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è');
        }

        const user = await response.json();
        document.getElementById('username').textContent = user.username;
        document.getElementById('balance').textContent = user.balance;
      } catch (err) {
        console.error('Auth error:', err);
        alert('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: ' + err.message);
        window.location.href = 'index.html';
      }
    }

    document.getElementById('logoutBtn').addEventListener('click', async () => {
      try {
        const response = await fetch(`${BASE_URL}/logout`, {
          method: 'POST',
          credentials: 'include'
        });
        
        if (response.ok) {
          window.location.href = 'index.html';
        } else {
          throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–π—Ç–∏');
        }
      } catch (err) {
        console.error('Logout error:', err);
        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ: ' + err.message);
      }
    });

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    checkAuth();
  </script>
</body>
</html>
